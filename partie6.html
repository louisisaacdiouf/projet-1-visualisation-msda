<!DOCTYPE html>
	<html>
	<head>
	<meta charset="utf-8">
	<style>
	.axis{
	font:10px sans-serif;
	fill:none;
	stroke:black;
	shape-rendering : crispEdges;
	}
	FORM{
	position : absolute ;
	right:200px
	
	}
	</style>
		
	</head>
	
	<body>
	
	<FORM NAME="Choix">
		<SELECT NAME="Liste" onChange="Lien()">
			<option VALUE="" selected disabled>Choisir un candidat</option>
			<option VALUE="sonko.html">Ousmane SONKO</option>
			<option VALUE="idy.html">Idrissa SECK</option>
			<option VALUE="Macky.html">Macky sall</option>
			<option VALUE="Madicke.html">Madicke NIANG</option>

		</SELECT>
	</FORM>
	<script src="d3.js"></script>

	<script>
	function Lien() {

		var part_de_issa = [
		{"regions":"Dakar", "part":18662},
		{"regions":"Diourbel", "part":884},
		{"regions":"Fatick", "part":4089},
		{"regions":"Kaffrine", "part":3406},
		{"regions":"Kaolack", "part":4343},
		{"regions":"Kedougou", "part":324},
		{"regions":"Kolda", "part":789},
		{"regions":"Louga", "part":15617},
		{"regions":"Matam", "part":582},
		{"regions":"Saint-louis", "part":7471},
		{"regions":"Sedhiou", "part":407},
		{"regions":"Tambacounda", "part":1184},
		{"regions":"Thies", "part":12102},
		{"regions":"Ziguinchor", "part":556}
	];

	var part_de_macky = [
		{"regions":"Dakar", "part":212355},
		{"regions":"Diourbel", "part":40501},
		{"regions":"Fatick", "part":8088},
		{"regions":"Kaffrine", "part":38874},
		{"regions":"Kaolack", "part":99376},
		{"regions":"Kedougou", "part":16153},
		{"regions":"Kolda", "part":36927},
		{"regions":"Louga", "part":73514},
		{"regions":"Matam", "part":92454},
		{"regions":"Saint-louis", "part":62788},
		{"regions":"Sedhiou", "part":23414},
		{"regions":"Tambacounda", "part":46096},
		{"regions":"Thies", "part":100422},
		{"regions":"Ziguinchor", "part":32846}
	];

	var part_de_madicke = [
		{"regions":"Dakar", "part":5646},
		{"regions":"Diourbel", "part":1682},
		{"regions":"Fatick", "part":673},
		{"regions":"Kaffrine", "part":731},
		{"regions":"Kaolack", "part":1758},
		{"regions":"Kedougou", "part":377},
		{"regions":"Kolda", "part":1042},
		{"regions":"Louga", "part":2344},
		{"regions":"Matam", "part":0},
		{"regions":"Saint-louis", "part":3160},
		{"regions":"Sedhiou", "part":680},
		{"regions":"Tambacounda", "part":1074},
		{"regions":"Thies", "part":2312},
		{"regions":"Ziguinchor", "part":510}
	];

	var part_de_idy = [
		{"regions":"Dakar", "part":115612},
		{"regions":"Diourbel", "part":22026},
		{"regions":"Fatick", "part":5172},
		{"regions":"Kaffrine", "part":6513},
		{"regions":"Kaolack", "part":18649},
		{"regions":"Kedougou", "part":2494},
		{"regions":"Kolda", "part":6245},
		{"regions":"Louga", "part":19788},
		{"regions":"Matam", "part":2239},
		{"regions":"Saint-louis", "part":17404},
		{"regions":"Sedhiou", "part":3808},
		{"regions":"Tambacounda", "part":5401},
		{"regions":"Thies", "part":120054},
		{"regions":"Ziguinchor", "part":2419}
	];

	var part_de_sonko = [
		{"regions":"Dakar", "part":101003},
		{"regions":"Diourbel", "part":6300},
		{"regions":"Fatick", "part":9349},
		{"regions":"Kaffrine", "part":5294},
		{"regions":"Kaolack", "part":22677},
		{"regions":"Kedougou", "part":3269},
		{"regions":"Kolda", "part":13839},
		{"regions":"Louga", "part":9612},
		{"regions":"Matam", "part":3698},
		{"regions":"Saint-louis", "part":18632},
		{"regions":"Sedhiou", "part":14833},
		{"regions":"Tambacounda", "part":11258},
		{"regions":"Thies", "part":19737},
		{"regions":"Ziguinchor", "part":41291}
	];

    var region = part_de_issa;

    i = document.Choix.Liste.selectedIndex;
	if (i == 0) return;
	// url = document.Choix.Liste.options[i].value;

    if (i==1) {
    	diagramme(part_de_sonko,"Ousmane SONKO");
    }
    if (i==2) {
    	diagramme(part_de_idy,"Idrissa SECK");
    }
    if (i==3) {
    	diagramme(part_de_macky,"Macky SALL");
    }
    if (i==4) {
    	diagramme(part_de_madicke,"Madické NIANG");
    }


		// i = document.Choix.Liste.selectedIndex;
		// if (i == 0) return;
		// url = document.Choix.Liste.options[i].value;
		// parent.location.href = url;
	}
	
	</script>
	<script>
		var part_de_issa = [
			{"regions":"Dakar", "part":18662},
			{"regions":"Diourbel", "part":884},
			{"regions":"Fatick", "part":4089},
			{"regions":"Kaffrine", "part":3406},
			{"regions":"Kaolack", "part":4343},
			{"regions":"Kedougou", "part":324},
			{"regions":"Kolda", "part":789},
			{"regions":"Louga", "part":15617},
			{"regions":"Matam", "part":582},
			{"regions":"Saint-louis", "part":7471},
			{"regions":"Sedhiou", "part":407},
			{"regions":"Tambacounda", "part":1184},
			{"regions":"Thies", "part":12102},
			{"regions":"Ziguinchor", "part":556}
		];
		window.onload = diagramme(part_de_issa,"Issa SALL");
		function diagramme(parts, nom_du_candidat){

	var body=d3.select("body");
	body.selectAll("svg").remove();
	body.selectAll("h1").remove();
    body.append("h1")
    .style("color","black")
    .style("text-align","center")
    .text("Nombre de Voix de "+nom_du_candidat);
	
	//Parametrage des dimensions
	var margin = {top:20, right:500, bottom:90, left:120},
	width = 950, height = 950;
	
	
	//Mise en place du cadre de dessin
	var svg = d3.select("body").append("svg")
	.attr("width",width + margin.left + margin.right)
	.attr("id","graphique")
	.style("background-color","Snow")
	.attr("height",height + margin.top + margin.bottom)
	.append("g")
	.attr("transform","translate(" + margin.left + "." + margin.top + ")");
	/// Colorer les candidats
	var couleur=["green","yellow","red","blue","tomato","purple","pink","brown","grey","powderblue","silver","coral","orange","black"];
	
    var region = parts;


	
var couleurs=["Dakar","Diourbel","Fatick","Kaffrine","Kaolack","Kedougou","Kolda","Louga","Matam","Saint-louis","Sedhiou","Tambacounda","Thies","Ziguinchor"];
	
	//Mise en place des axes
	var x = d3.scale.ordinal()
		.rangeRoundBands([0,width],0.10);

	
	var y = d3.scale.linear()
	.range([height,0]);
	
	var xAxis = d3.svg.axis()
	.scale(x)
	.orient("bottom");
	
	var yAxis = d3.svg.axis()
	.scale(y)
	.orient("left")
	.ticks(10);
	
	region.forEach(function(d){
		d.regions = d.regions;
		d.part = +d.part;
	});

	x.domain(region.map(function(d){return d.regions;}));
	y.domain([0,d3.max(region, function(d){return d.part;})]);
	
	svg.append("g")
	.attr("class","x axis")
	.attr("transform","translate(0,"+height+")")
	.call(xAxis);
	
	svg.append("g")
	.attr("class","y axis")
	.call(yAxis);

	
	svg.append('text')
    .attr('x',-500)
    .attr('y', -70)
    .attr('transform', 'rotate(-90)')
    .attr('text-anchor', 'middle')
	.style("stroke","black")
    .text('Nombre de Voix')

svg.append('text')
    .attr('x', 500)
    .attr('y', 1050)
    .attr('text-anchor', 'middle')
	.style("stroke","black")
    .text('Capitales Regionales')
	//Representation des données en bande
	var group = svg.append("g");
	group.selectAll("bar")
	.data(region)
	.enter()
	.append("rect")
	.attr("class","bar")
	.attr("x",function(d){return x(d.regions);})
	.attr("width",x.rangeBand())
	.attr("y",function(d){return y(d.part);})
	.attr("height",function(d){return height - y(d.part);})
	.attr("fill",function(d,i){
			return(couleur[i]);
		});
	
	
	var legends = svg.append("g").attr("transform", "translate(950,50)")
.selectAll(".legends").data(region);

var legend = legends.enter().append("g").classed("label", true).attr
("transform", function(d,i){return "translate(0," + (i+1)*30 + ")";});

legend.append("rect").attr("width", 15).attr("height", 15).attr("fill", function(d,i){
			return(couleur[i]) ;});


legend.append("text").classed("label", true).text(function(d,i){return couleurs[i];})
 .attr("fill", function(d,i){
			return(couleur[i]);})
 .attr("x", 30)
 .attr("y", 15);
	
	
		}
	</script>
	
	</body>
</html>

